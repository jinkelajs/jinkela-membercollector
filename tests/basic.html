<meta charset="utf-8" />
<script src="/tester.js"></script>
<script src="../node_modules/jinkela/umd.js"></script>
<script src="../index.js"></script>
<script>
addEventListener('load', () => {

  Tester.log('normal');
  let a = new Radio({ text: 'hehe' }).to(document.body);
  Tester.assert(a.element.offsetWidth > 0, 'must visible');
  Tester.assert(a.element.textContent.trim() === 'hehe', 'text must be hehe');
  Tester.assert(!a.element.querySelector('.active'), 'active must not be included');
  Tester.assert(a.checked === false, 'a.checked must be false');
  a.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(a.element.querySelector('.active'), 'active must be included');
  Tester.assert(a.checked === true, 'a.checked must be true');
  Tester.assert(a.readonly === false, 'a.readonly must be false');
  a.readonly = true;
  a.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(a.checked === true, 'a.checked must be true yet');

  Tester.log('defaults checked');
  let b = new Radio({ text: 'hehe', checked: true }).to(document.body);
  Tester.assert(b.element.querySelector('.active'), 'active must be included');
  Tester.assert(b.checked === true, 'b.checked must be true');
  b.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(b.element.querySelector('.active'), 'active must be included');
  Tester.assert(b.checked === true, 'b.checked must be true');
  Tester.assert(b.readonly === false, 'b.readonly must be false');
  b.readonly = true;
  b.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(b.checked === true, 'b.checked must be true');

  Tester.log('readonly');
  let c = new Radio({ text: 'hehe', readonly: true }).to(document.body);
  Tester.assert(c.element.offsetWidth > 0, 'must visible');
  Tester.assert(c.element.textContent.trim() === 'hehe', 'text must be hehe');
  Tester.assert(c.element.classList.contains('readonly'), 'c.readonly must not be included');
  Tester.assert(c.checked === false, 'c.checked must be false');
  c.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(c.checked === false, 'c.checked must be false yet');
  Tester.assert(c.readonly, 'readonly must be true');
  c.readonly = false;
  Tester.assert(c.readonly === false, 'c.readonly must be false');
  c.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(c.checked === true, 'c.checked must be true');

  Tester.log('readonly and defaults checked');
  let d = new Radio({ text: 'hehe', readonly: true, checked: true }).to(document.body);
  Tester.assert(d.checked === true, 'd.checked must be true');
  d.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(d.checked === true, 'd.checked must be true yet');
  d.readonly = false;
  d.element.dispatchEvent(new MouseEvent('click'));
  Tester.assert(d.checked === true, 'd.checked must be true yet');

  Tester.log('change event');
  let e = new Radio({ text: 'hehe' }).to(document.body);
  e.element.addEventListener('change', event => {
    Tester.assert(event.bubbles === true, 'change event must be bubbles');
    Tester.assert(e.checked === true, 'e.checked must be true');
    Tester.feedback(true);
  });
  e.element.dispatchEvent(new MouseEvent('click'));

});
</script>
